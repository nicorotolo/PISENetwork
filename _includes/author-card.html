{% comment %}
  Author card for article pages.
  Usa page.author come chiave in _data/editorial/authors.yml
{% endcomment %}

{% assign authors = site.data.authors | default: site.data.editorial.authors %}
{% assign author = authors[page.author] %}

{% if author %}
<div class="author-card">
  <!-- Colonna sinistra: avatar -->
  <div class="author-card__left">
    {% if author.avatar %}
      <img class="author-card__avatar"
           src="{{ author.avatar | relative_url }}"
           alt="{{ author.name | default: page.author }}">
    {% else %}
      <span class="author-card__avatar author-card__avatar--placeholder">
        {{ author.name | default: page.author | slice: 0, 1 | upcase }}
      </span>
    {% endif %}
  </div>

  <!-- Colonna centrale: nome + testo -->
  <div class="author-card__center">
    <div class="author-card__header">
      <h2 class="author-card__name">
        {{ author.name | default: page.author }}
      </h2>

      {% if author.role %}
        <span class="author-card__role">
          {{ author.role }}
        </span>
      {% endif %}
    </div>

    {% if author.cohort or author.location %}
      <div class="author-card__meta">
        {% if author.cohort %}
          <span>{{ author.cohort }}</span>
        {% endif %}

        {% if author.cohort and author.location %}
          <span class="author-card__dot">â€¢</span>
        {% endif %}

        {% if author.location %}
          <span>{{ author.location }}</span>
        {% endif %}
      </div>
    {% endif %}

    <p class="author-card__bio">
      {{ author.long_bio | default: author.bio }}
    </p>
  </div>

  {%- comment -%}
    Colonna destra: social impilati verticalmente.
    Mostra SOLO i social effettivamente valorizzati in authors.yml
  {%- endcomment -%}
  {% if author.links or author.linkedin or author.instagram or author.twitter or author.email or author.website %}
    <div class="author-card__right">
      {%- if author.links -%}
        {%- for link in author.links -%}
          <a class="author-card__social"
             href="{{ link.url }}"
             target="_blank"
             rel="noopener"
             title="{{ link.label }}">
            {% if link.icon %}
              <i class="{{ link.icon }}" aria-hidden="true"></i>
            {% else %}
              {{ link.label | slice: 0,1 }}
            {% endif %}
          </a>
        {%- endfor -%}
      {%- endif -%}

      {%- if author.linkedin -%}
        <a class="author-card__social"
           href="{{ author.linkedin }}"
           target="_blank"
           rel="noopener"
           title="LinkedIn">
          <i class="fab fa-linkedin-in" aria-hidden="true"></i>
        </a>
      {%- endif -%}

      {%- if author.instagram -%}
        <a class="author-card__social"
           href="{{ author.instagram }}"
           target="_blank"
           rel="noopener"
           title="Instagram">
          <i class="fab fa-instagram" aria-hidden="true"></i>
        </a>
      {%- endif -%}

      {%- if author.twitter -%}
        <a class="author-card__social"
           href="{{ author.twitter }}"
           target="_blank"
           rel="noopener"
           title="Twitter / X">
          <i class="fab fa-x-twitter" aria-hidden="true"></i>
        </a>
      {%- endif -%}

      {%- if author.website -%}
        <a class="author-card__social"
           href="{{ author.website }}"
           target="_blank"
           rel="noopener"
           title="Website">
          <i class="fas fa-globe" aria-hidden="true"></i>
        </a>
      {%- endif -%}

      {%- if author.email -%}
        <a class="author-card__social"
           href="mailto:{{ author.email }}"
           title="Email">
          <i class="fas fa-envelope" aria-hidden="true"></i>
        </a>
      {%- endif -%}
    </div>
  {% endif %}
</div>
{% endif %}
